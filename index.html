<!DOCTYPE html>
<html lang="zh">
<head>
  
  <meta charset='utf-8'>
  <meta name="viewport" content="width=device-width, initial-scale=1" id="wixDesktopViewport" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Wix.com Website Builder"/>

  <link rel="icon" sizes="192x192" href="https://www.wix.com/favicon.ico">
  <link rel="shortcut icon" href="https://www.wix.com/favicon.ico" type="image/x-icon"/>
  <link rel="apple-touch-icon" href="https://www.wix.com/favicon.ico" type="image/x-icon"/>
  <!-- Safari Pinned Tab Icon -->
  <!-- <link rel="mask-icon" href="https://www.wix.com/favicon.ico"> -->

  <!-- Legacy Polyfills -->
<script>
	let cameraStream
const camera = document.querySelector('#camera')
const stop = document.querySelector('#stop')
const video = document.querySelector('#video')

const constraints = { audio: true, video: true }
camera.addEventListener('click', () => {
  navigator.mediaDevices.getUserMedia(constraints).then(stream => {
    cameraStream = stream
    video.srcObject = stream
    video.play()
  })
})

stop.addEventListener('click', () => {
  if (cameraStream) {
    cameraStream.getTracks().forEach(track => {
      track.stop()
    })
    cameraStream = null
  }
})
</script>

<script>
$(function(){hljs.highlightAll(),$("button.sub_menu").on("click",function(){$(this).closest("aside.left_block").toggleClass("-on")});
	// 開啟視訊鏡頭，瀏覽器會跳詢問視窗
const video_el=document.getElementById("my_video"),stream=document.getElementById("my_canvas");
var camera_open = document.getElementById("camera_open");
var camera_close = document.getElementById("camera_close");
var stream_obj;
camera_open.addEventListener('click', function(){
navigator.mediaDevices.getUserMedia({video: true}).then(function(stream){
  stream_obj = stream;         // 將串流物件放在 stream_obj 全域變數，方便後面關閉 webcam 時會用到
  video_el.srcObject = stream; // video 標籤顯示 webcam 畫面
}).catch(function(video_el){      // 若無法取得畫面，執行 catch
  console.log('navigator.MediaDevices.getUserMedia Error: ', video_el.message, video_el.name);
})
}),

// 將所有的 MediaStreamTrack 都關閉
camera_close.addEventListener('click', function(){
stream_obj.getTracks().forEach(function(video_el) {
  video_el.stop()}),
stream_obj = void 0,    // 回到該變數原來預設(即 undefined)
video_el.srcObject = null})}); // 將 video 標籤上的 srcObject 清空
</script>

</head>
</html>
